{% extends "base.html" %}

{% block content %}
<div x-data="bottleDetector" class="max-w-3xl mx-auto">
    <!-- Kamera Önizleme -->
    <div class="mb-6 bg-white p-4 rounded-lg shadow">
        <h2 class="text-xl font-semibold mb-4">Kamera Önizleme</h2>
        <div class="relative aspect-video bg-black rounded">
            <video id="camera" class="w-full h-full rounded" autoplay playsinline></video>
            <canvas id="overlay" class="absolute top-0 left-0 w-full h-full"></canvas>
        </div>
    </div>

    <!-- Kontroller -->
    <div class="flex gap-4 mb-6">
        <button 
            @click="captureImage" 
            class="flex-1 bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition"
            :disabled="processing"
        >
            <span x-text="processing ? 'İşleniyor...' : 'Geri Dönüştür'"></span>
        </button>
    </div>

    <!-- Sonuçlar -->
    <div x-show="qrCode" class="bg-white p-4 rounded-lg shadow">
        <h2 class="text-xl font-semibold mb-4">QR Kod</h2>
        <div class="flex justify-center">
            <img :src="'data:image/png;base64,' + qrCode" class="w-48 h-48">
        </div>
        <div class="mt-4 text-center">
            <p class="text-lg">Toplam Puan: <span x-text="totalPoints"></span></p>
        </div>
    </div>
</div>
{% endblock %} 